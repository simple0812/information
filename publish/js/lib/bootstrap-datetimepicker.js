/* =========================================================
 * bootstrap-datetimepicker.js
 * =========================================================
 * Copyright 2012 Stefan Petre
 * Improvements by Andrew Rowls
 * Improvements by SÃ©bastien Malot
 * Improvements by Yun Lai
 * Project URL : http://www.malot.fr/bootstrap-datetimepicker
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

!function(a){function b(){return new Date(Date.UTC.apply(Date,arguments))}function c(){var a=new Date;return b(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),0)}var d=function(b,c){var d=this;this.element=a(b),this.language=c.language||this.element.data("date-language")||"en",this.language=this.language in e?this.language:"en",this.isRTL=e[this.language].rtl||!1,this.formatType=c.formatType||this.element.data("format-type")||"standard",this.format=f.parseFormat(c.format||this.element.data("date-format")||e[this.language].format||f.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.bootcssVer=this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2,this.component=this.element.is(".date")?this.bootcssVer==3?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar").parent():!1,this.componentReset=this.element.is(".date")?this.bootcssVer==3?this.element.find(".input-group-addon .glyphicon-remove").parent():this.element.find(".add-on .icon-remove").parent():!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this.linkField=c.linkField||this.element.data("link-field")||!1,this.linkFormat=f.parseFormat(c.linkFormat||this.element.data("link-format")||f.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=c.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=c.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=c.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=c.initialDate||new Date,this._attachEvents(),this.formatViewType="datetime","formatViewType"in c?this.formatViewType=c.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in c?this.minView=c.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=f.convertViewMode(this.minView),this.maxView=f.modes.length-1,"maxView"in c?this.maxView=c.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=f.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in c?this.wheelViewModeNavigation=c.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in c?this.wheelViewModeNavigationInverseDirection=c.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in c?this.wheelViewModeNavigationDelay=c.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in c?this.startViewMode=c.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=f.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in c?this.viewSelect=c.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=f.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in c?this.forceParse=c.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse")),this.picker=a(this.bootcssVer==3?f.templateV3:f.template).appendTo(this.isInline?this.element:"body").on({click:a.proxy(this.click,this),mousedown:a.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(a.fn.mousewheel?this.picker.on({mousewheel:a.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL&&(this.picker.addClass("datetimepicker-rtl"),this.bootcssVer==3?this.picker.find(".prev span, .next span").toggleClass("glyphicon-arrow-left glyphicon-arrow-right"):this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),a(document).on("mousedown",function(b){a(b.target).closest(".datetimepicker").length===0&&d.hide()}),this.autoclose=!1,"autoclose"in c?this.autoclose=c.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in c?this.keyboardNavigation=c.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=c.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=c.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(c.weekStart||this.element.data("date-weekstart")||e[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-Infinity,this.endDate=Infinity,this.daysOfWeekDisabled=[],this.setStartDate(c.startDate||this.element.data("date-startdate")),this.setEndDate(c.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(c.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};d.prototype={constructor:d,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:a.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]];for(var b=0,c,d;b<this._events.length;b++)c=this._events[b][0],d=this._events[b][1],c.on(d)},_detachEvents:function(){for(var a=0,b,c;a<this._events.length;a++)b=this._events[a][0],c=this._events[a][1],b.off(c);this._events=[]},show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),a(window).on("resize",a.proxy(this.place,this)),b&&(b.stopPropagation(),b.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(b){if(!this.isVisible)return;if(this.isInline)return;this.picker.hide(),a(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})},remove:function(){this._detachEvents(),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+a.getTimezoneOffset()*6e4)},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-a.getTimezoneOffset()*6e4))},setUTCDate:function(a){a>=this.startDate&&a<=this.endDate?(this.date=a,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:a,startDate:this.startDate,endDate:this.endDate})},setFormat:function(a){this.format=f.parseFormat(a,this.formatType);var b;this.isInput?b=this.element:this.component&&(b=this.element.find("input")),b&&b.val()&&this.setValue()},setValue:function(){var b=this.getFormattedDate();this.isInput?this.element.val(b):(this.component&&this.element.find("input").val(b),this.element.data("date",b)),this.linkField&&a("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(a){return a==undefined&&(a=this.format),f.formatDate(this.date,a,this.language,this.formatType)},setStartDate:function(a){this.startDate=a||-Infinity,this.startDate!==-Infinity&&(this.startDate=f.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(a){this.endDate=a||Infinity,this.endDate!==Infinity&&(this.endDate=f.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(b){this.daysOfWeekDisabled=b||[],a.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=a.map(this.daysOfWeekDisabled,function(a){return parseInt(a,10)}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return;var b=0;a("div").each(function(){var c=parseInt(a(this).css("zIndex"),10);c>b&&(b=c)});var c=b+10,d,e,f;if(this.component){d=this.component.offset(),f=d.left;if(this.pickerPosition=="bottom-left"||this.pickerPosition=="top-left")f+=this.component.outerWidth()-this.picker.outerWidth()}else d=this.element.offset(),f=d.left;this.pickerPosition=="top-left"||this.pickerPosition=="top-right"?e=d.top-this.picker.outerHeight():e=d.top+this.height,this.picker.css({top:e,left:f,zIndex:c})},update:function(){var a,b=!1;if(arguments&&arguments.length&&(typeof arguments[0]=="string"||arguments[0]instanceof Date))a=arguments[0],b=!0;else{a=this.element.data("date")||(this.isInput?this.element.val():this.element.find("input").val())||this.initialDate;if(typeof a=="string"||a instanceof String)a=a.replace(/^\s+|\s+$/g,"")}a||(a=new Date,b=!1),this.date=f.parseDate(a,this.format,this.language,this.formatType),b&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){var a=this.weekStart,b="<tr>";while(a<this.weekStart+7)b+='<th class="dow">'+e[this.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datetimepicker-days thead").append(b)},fillMonths:function(){var a="",b=0;while(b<12)a+='<span class="month">'+e[this.language].monthsShort[b++]+"</span>";this.picker.find(".datetimepicker-months td").html(a)},fill:function(){if(this.date==null||this.viewDate==null)return;var c=new Date(this.viewDate),d=c.getUTCFullYear(),g=c.getUTCMonth(),h=c.getUTCDate(),i=c.getUTCHours(),j=c.getUTCMinutes(),k=this.startDate!==-Infinity?this.startDate.getUTCFullYear():-Infinity,l=this.startDate!==-Infinity?this.startDate.getUTCMonth():-Infinity,m=this.endDate!==Infinity?this.endDate.getUTCFullYear():Infinity,n=this.endDate!==Infinity?this.endDate.getUTCMonth():Infinity,o=(new b(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate())).valueOf(),p=new Date;this.picker.find(".datetimepicker-days thead th:eq(1)").text(e[this.language].months[g]+" "+d);if(this.formatViewType=="time"){var q=i%12?i%12:12,r=(q<10?"0":"")+q,s=(j<10?"0":"")+j,t=e[this.language].meridiem[i<12?0:1];this.picker.find(".datetimepicker-hours thead th:eq(1)").text(r+":"+s+" "+t.toUpperCase()),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(r+":"+s+" "+t.toUpperCase())}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(h+" "+e[this.language].months[g]+" "+d),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(h+" "+e[this.language].months[g]+" "+d);this.picker.find("tfoot th.today").text(e[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var u=b(d,g-1,28,0,0,0,0),v=f.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(v),u.setUTCDate(v-(u.getUTCDay()-this.weekStart+7)%7);var w=new Date(u);w.setUTCDate(w.getUTCDate()+42),w=w.valueOf();var x=[],y;while(u.valueOf()<w){u.getUTCDay()==this.weekStart&&x.push("<tr>"),y="";if(u.getUTCFullYear()<d||u.getUTCFullYear()==d&&u.getUTCMonth()<g)y+=" old";else if(u.getUTCFullYear()>d||u.getUTCFullYear()==d&&u.getUTCMonth()>g)y+=" new";this.todayHighlight&&u.getUTCFullYear()==p.getFullYear()&&u.getUTCMonth()==p.getMonth()&&u.getUTCDate()==p.getDate()&&(y+=" today"),u.valueOf()==o&&(y+=" active");if(u.valueOf()+864e5<=this.startDate||u.valueOf()>this.endDate||a.inArray(u.getUTCDay(),this.daysOfWeekDisabled)!==-1)y+=" disabled";x.push('<td class="day'+y+'">'+u.getUTCDate()+"</td>"),u.getUTCDay()==this.weekEnd&&x.push("</tr>"),u.setUTCDate(u.getUTCDate()+1)}this.picker.find(".datetimepicker-days tbody").empty().append(x.join("")),x=[];var z="",A="",B="";for(var C=0;C<24;C++){var D=b(d,g,h,C);y="",D.valueOf()+36e5<=this.startDate||D.valueOf()>this.endDate?y+=" disabled":i==C&&(y+=" active"),this.showMeridian&&e[this.language].meridiem.length==2?(A=C<12?e[this.language].meridiem[0]:e[this.language].meridiem[1],A!=B&&(B!=""&&x.push("</fieldset>"),x.push('<fieldset class="hour"><legend>'+A.toUpperCase()+"</legend>")),B=A,z=C%12?C%12:12,x.push('<span class="hour'+y+" hour_"+(C<12?"am":"pm")+'">'+z+"</span>"),C==23&&x.push("</fieldset>")):(z=C+":00",x.push('<span class="hour'+y+'">'+z+"</span>"))}this.picker.find(".datetimepicker-hours td").html(x.join("")),x=[],z="",A="",B="";for(var C=0;C<60;C+=this.minuteStep){var D=b(d,g,h,i,C,0);y="",D.valueOf()<this.startDate||D.valueOf()>this.endDate?y+=" disabled":Math.floor(j/this.minuteStep)==Math.floor(C/this.minuteStep)&&(y+=" active"),this.showMeridian&&e[this.language].meridiem.length==2?(A=i<12?e[this.language].meridiem[0]:e[this.language].meridiem[1],A!=B&&(B!=""&&x.push("</fieldset>"),x.push('<fieldset class="minute"><legend>'+A.toUpperCase()+"</legend>")),B=A,z=i%12?i%12:12,x.push('<span class="minute'+y+'">'+z+":"+(C<10?"0"+C:C)+"</span>"),C==59&&x.push("</fieldset>")):(z=C+":00",x.push('<span class="minute'+y+'">'+i+":"+(C<10?"0"+C:C)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(x.join(""));var E=this.date.getUTCFullYear(),F=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(d).end().find("span").removeClass("active");E==d&&F.eq(this.date.getUTCMonth()).addClass("active"),(d<k||d>m)&&F.addClass("disabled"),d==k&&F.slice(0,l).addClass("disabled"),d==m&&F.slice(n+1).addClass("disabled"),x="",d=parseInt(d/10,10)*10;var G=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(d+"-"+(d+9)).end().find("td");d-=1;for(var C=-1;C<11;C++)x+='<span class="year'+(C==-1||C==10?" old":"")+(E==d?" active":"")+(d<k||d>m?" disabled":"")+'">'+d+"</span>",d+=1;G.html(x),this.place()},updateNavArrows:function(){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth(),d=a.getUTCDate(),e=a.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-Infinity&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()&&e<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==Infinity&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()&&e>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-Infinity&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==Infinity&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-Infinity&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==Infinity&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-Infinity&&b<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==Infinity&&b>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(b){b.preventDefault(),b.stopPropagation();if(this.wheelPause)return;this.wheelPause=!0;var c=b.originalEvent,d=c.wheelDelta,e=d>0?1:d===0?0:-1;this.wheelViewModeNavigationInverseDirection&&(e=-e),this.showMode(e),setTimeout(a.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)},click:function(c){c.stopPropagation(),c.preventDefault();var d=a(c.target).closest("span, td, th, legend");if(d.length==1){if(d.is(".disabled")){this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});return}switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var e=f.modes[this.viewMode].navStep*(d[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,e);break;case 1:this.viewDate=this.moveDate(this.viewDate,e);break;case 2:this.viewDate=this.moveMonth(this.viewDate,e);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,e)}this.fill();break;case"today":var g=new Date;g=b(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds(),0),g<this.startDate?g=this.startDate:g>this.endDate&&(g=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(g),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!d.is(".disabled")){var h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),j=this.viewDate.getUTCDate(),k=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),m=this.viewDate.getUTCSeconds();if(d.is(".month"))this.viewDate.setUTCDate(1),i=d.parent().find("span").index(d),j=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(i),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(b(h,i,j,k,l,m,0));else if(d.is(".year"))this.viewDate.setUTCDate(1),h=parseInt(d.text(),10)||0,this.viewDate.setUTCFullYear(h),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(b(h,i,j,k,l,m,0));else if(d.is(".hour")){k=parseInt(d.text(),10)||0;if(d.hasClass("hour_am")||d.hasClass("hour_pm"))k==12&&d.hasClass("hour_am")?k=0:k!=12&&d.hasClass("hour_pm")&&(k+=12);this.viewDate.setUTCHours(k),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(b(h,i,j,k,l,m,0))}else d.is(".minute")&&(l=parseInt(d.text().substr(d.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(l),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(b(h,i,j,k,l,m,0)));if(this.viewMode!=0){var n=this.viewMode;this.showMode(-1),this.fill(),n==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(d.is(".day")&&!d.is(".disabled")){var j=parseInt(d.text(),10)||1,h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),k=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),m=this.viewDate.getUTCSeconds();d.is(".old")?i===0?(i=11,h-=1):i-=1:d.is(".new")&&(i==11?(i=0,h+=1):i+=1),this.viewDate.setUTCFullYear(h),this.viewDate.setUTCMonth(i,j),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(b(h,i,j,k,l,m,0))}var n=this.viewMode;this.showMode(-1),this.fill(),n==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(a,b){if(!b||b=="date")this.date=a;if(!b||b=="view")this.viewDate=a;this.fill(),this.setValue();var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&(c.change(),!this.autoclose||!!b&&b!="date"),this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCMinutes(c.getUTCMinutes()+b*this.minuteStep),c},moveHour:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCHours(c.getUTCHours()+b),c},moveDate:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCDate(c.getUTCDate()+b),c},moveMonth:function(a,b){if(!b)return a;var c=new Date(a.valueOf()),d=c.getUTCDate(),e=c.getUTCMonth(),f=Math.abs(b),g,h;b=b>0?1:-1;if(f==1){h=b==-1?function(){return c.getUTCMonth()==e}:function(){return c.getUTCMonth()!=g},g=e+b,c.setUTCMonth(g);if(g<0||g>11)g=(g+12)%12}else{for(var i=0;i<f;i++)c=this.moveMonth(c,b);g=c.getUTCMonth(),c.setUTCDate(d),h=function(){return g!=c.getUTCMonth()}}while(h())c.setUTCDate(--d),c.setUTCMonth(g);return c},moveYear:function(a,b){return this.moveMonth(a,b*12)},dateWithinRange:function(a){return a>=this.startDate&&a<=this.endDate},keydown:function(a){if(this.picker.is(":not(:visible)")){a.keyCode==27&&this.show();return}var b=!1,c,d,e,f,g;switch(a.keyCode){case 27:this.hide(),a.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;c=a.keyCode==37?-1:1,viewMode=this.viewMode,a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1),viewMode==4?(f=this.moveYear(this.date,c),g=this.moveYear(this.viewDate,c)):viewMode==3?(f=this.moveMonth(this.date,c),g=this.moveMonth(this.viewDate,c)):viewMode==2?(f=this.moveDate(this.date,c),g=this.moveDate(this.viewDate,c)):viewMode==1?(f=this.moveHour(this.date,c),g=this.moveHour(this.viewDate,c)):viewMode==0&&(f=this.moveMinute(this.date,c),g=this.moveMinute(this.viewDate,c)),this.dateWithinRange(f)&&(this.date=f,this.viewDate=g,this.setValue(),this.update(),a.preventDefault(),b=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;c=a.keyCode==38?-1:1,viewMode=this.viewMode,a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1),viewMode==4?(f=this.moveYear(this.date,c),g=this.moveYear(this.viewDate,c)):viewMode==3?(f=this.moveMonth(this.date,c),g=this.moveMonth(this.viewDate,c)):viewMode==2?(f=this.moveDate(this.date,c*7),g=this.moveDate(this.viewDate,c*7)):viewMode==1?this.showMeridian?(f=this.moveHour(this.date,c*6),g=this.moveHour(this.viewDate,c*6)):(f=this.moveHour(this.date,c*4),g=this.moveHour(this.viewDate,c*4)):viewMode==0&&(f=this.moveMinute(this.date,c*4),g=this.moveMinute(this.viewDate,c*4)),this.dateWithinRange(f)&&(this.date=f,this.viewDate=g,this.setValue(),this.update(),a.preventDefault(),b=!0);break;case 13:if(this.viewMode!=0){var h=this.viewMode;this.showMode(-1),this.fill(),h==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();a.preventDefault();break;case 9:this.hide()}if(b){var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(a){if(a){var b=Math.max(0,Math.min(f.modes.length-1,this.viewMode+a));b>=this.minView&&b<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:b}),this.viewMode=b)}this.picker.find(">div").hide().filter(".datetimepicker-"+f.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(a){this._setDate(null,"date")}},a.fn.datetimepicker=function(b){var c=Array.apply(null,arguments);c.shift();var e;return this.each(function(){var f=a(this),g=f.data("datetimepicker"),h=typeof b=="object"&&b;g||f.data("datetimepicker",g=new d(this,a.extend({},a.fn.datetimepicker.defaults,h)));if(typeof b=="string"&&typeof g[b]=="function"){e=g[b].apply(g,c);if(e!==undefined)return!1}}),e!==undefined?e:this},a.fn.datetimepicker.defaults={},a.fn.datetimepicker.Constructor=d;var e=a.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}},f={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,f.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},getDefaultFormat:function(a,b){if(a=="standard")return b=="input"?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if(a=="php")return b=="input"?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(a){if(a=="standard")return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if(a=="php")return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(a,b){var c=a.replace(this.validParts(b),"\0").split("\0"),d=a.match(this.validParts(b));if(!c||!c.length||!d||d.length==0)throw new Error("Invalid date format.");return{separators:c,parts:d}},parseDate:function(c,f,g,h){if(c instanceof Date){var i=new Date(c.valueOf()-c.getTimezoneOffset()*6e4);return i.setMilliseconds(0),i}/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(c)&&(f=this.parseFormat("yyyy-mm-dd",h)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(c)&&(f=this.parseFormat("yyyy-mm-dd hh:ii",h)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(c)&&(f=this.parseFormat("yyyy-mm-dd hh:ii:ss",h));if(/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(c)){var j=/([-+]\d+)([dmwy])/,k=c.match(/([-+]\d+)([dmwy])/g),l,m;c=new Date;for(var n=0;n<k.length;n++){l=j.exec(k[n]),m=parseInt(l[1]);switch(l[2]){case"d":c.setUTCDate(c.getUTCDate()+m);break;case"m":c=d.prototype.moveMonth.call(d.prototype,c,m);break;case"w":c.setUTCDate(c.getUTCDate()+m*7);break;case"y":c=d.prototype.moveYear.call(d.prototype,c,m)}}return b(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate(),c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),0)}var k=c&&c.match(this.nonpunctuation)||[],c=new Date(0,0,0,0,0,0,0),o={},p=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],q={hh:function(a,b){return a.setUTCHours(b)},h:function(a,b){return a.setUTCHours(b)},HH:function(a,b){return a.setUTCHours(b==12?0:b)},H:function(a,b){return a.setUTCHours(b==12?0:b)},ii:function(a,b){return a.setUTCMinutes(b)},i:function(a,b){return a.setUTCMinutes(b)},ss:function(a,b){return a.setUTCSeconds(b)},s:function(a,b){return a.setUTCSeconds(b)},yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){b-=1;while(b<0)b+=12;b%=12,a.setUTCMonth(b);while(a.getUTCMonth()!=b)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)},p:function(a,b){return a.setUTCHours(b==1?a.getUTCHours()+12:a.getUTCHours())}},r,s,l;q.M=q.MM=q.mm=q.m,q.dd=q.d,q.P=q.p,c=b(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds());if(k.length==f.parts.length){for(var n=0,t=f.parts.length;n<t;n++){r=parseInt(k[n],10),l=f.parts[n];if(isNaN(r))switch(l){case"MM":s=a(e[g].months).filter(function(){var a=this.slice(0,k[n].length),b=k[n].slice(0,a.length);return a==b}),r=a.inArray(s[0],e[g].months)+1;break;case"M":s=a(e[g].monthsShort).filter(function(){var a=this.slice(0,k[n].length),b=k[n].slice(0,a.length);return a==b}),r=a.inArray(s[0],e[g].monthsShort)+1;break;case"p":case"P":r=a.inArray(k[n].toLowerCase(),e[g].meridiem)}o[l]=r}for(var n=0,u;n<p.length;n++)u=p[n],u in o&&!isNaN(o[u])&&q[u](c,o[u])}return c},formatDate:function(b,c,d,g){if(b==null)return"";var h;if(g=="standard")h={yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear(),m:b.getUTCMonth()+1,M:e[d].monthsShort[b.getUTCMonth()],MM:e[d].months[b.getUTCMonth()],d:b.getUTCDate(),D:e[d].daysShort[b.getUTCDay()],DD:e[d].days[b.getUTCDay()],p:e[d].meridiem.length==2?e[d].meridiem[b.getUTCHours()<12?0:1]:"",h:b.getUTCHours(),i:b.getUTCMinutes(),s:b.getUTCSeconds()},e[d].meridiem.length==2?h.H=h.h%12==0?12:h.h%12:h.H=h.h,h.HH=(h.H<10?"0":"")+h.H,h.P=h.p.toUpperCase(),h.hh=(h.h<10?"0":"")+h.h,h.ii=(h.i<10?"0":"")+h.i,h.ss=(h.s<10?"0":"")+h.s,h.dd=(h.d<10?"0":"")+h.d,h.mm=(h.m<10?"0":"")+h.m;else{if(g!="php")throw new Error("Invalid format type.");h={y:b.getUTCFullYear().toString().substring(2),Y:b.getUTCFullYear(),F:e[d].months[b.getUTCMonth()],M:e[d].monthsShort[b.getUTCMonth()],n:b.getUTCMonth()+1,t:f.getDaysInMonth(b.getUTCFullYear(),b.getUTCMonth()),j:b.getUTCDate(),l:e[d].days[b.getUTCDay()],D:e[d].daysShort[b.getUTCDay()],w:b.getUTCDay(),N:b.getUTCDay()==0?7:b.getUTCDay(),S:b.getUTCDate()%10<=e[d].suffix.length?e[d].suffix[b.getUTCDate()%10-1]:"",a:e[d].meridiem.length==2?e[d].meridiem[b.getUTCHours()<12?0:1]:"",g:b.getUTCHours()%12==0?12:b.getUTCHours()%12,G:b.getUTCHours(),i:b.getUTCMinutes(),s:b.getUTCSeconds()},h.m=(h.n<10?"0":"")+h.n,h.d=(h.j<10?"0":"")+h.j,h.A=h.a.toString().toUpperCase(),h.h=(h.g<10?"0":"")+h.g,h.H=(h.G<10?"0":"")+h.G,h.i=(h.i<10?"0":"")+h.i,h.s=(h.s<10?"0":"")+h.s}var b=[],i=a.extend([],c.separators);for(var j=0,k=c.parts.length;j<k;j++)i.length&&b.push(i.shift()),b.push(h[c.parts[j]]);return i.length&&b.push(i.shift()),b.join("")},convertViewMode:function(a){switch(a){case 4:case"decade":a=4;break;case 3:case"year":a=3;break;case 2:case"month":a=2;break;case 1:case"day":a=1;break;case 0:case"hour":a=0}return a},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><i class="glyphicon glyphicon-arrow-left"></i> </th><th colspan="5" class="switch"></th><th class="next"><i class="glyphicon glyphicon-arrow-right"></i> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};f.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-hours">'+'<table class=" table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-days">'+'<table class=" table-condensed">'+f.headTemplate+"<tbody></tbody>"+f.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-months">'+'<table class="table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-years">'+'<table class="table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+"</table>"+"</div>"+"</div>",f.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+f.headTemplateV3+f.contTemplate+f.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-hours">'+'<table class=" table-condensed">'+f.headTemplateV3+f.contTemplate+f.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-days">'+'<table class=" table-condensed">'+f.headTemplateV3+"<tbody></tbody>"+f.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-months">'+'<table class="table-condensed">'+f.headTemplateV3+f.contTemplate+f.footTemplate+"</table>"+"</div>"+'<div class="datetimepicker-years">'+'<table class="table-condensed">'+f.headTemplateV3+f.contTemplate+f.footTemplate+"</table>"+"</div>"+"</div>",a.fn.datetimepicker.DPGlobal=f,a.fn.datetimepicker.noConflict=function(){return a.fn.datetimepicker=old,this},a(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(b){var c=a(this);if(c.data("datetimepicker"))return;b.preventDefault(),c.datetimepicker("show")}),a(function(){a('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery)