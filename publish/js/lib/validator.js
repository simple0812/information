var validator=function(a){return{className:"validator",compareMode:{lt:function(a,b){return a<b},eq:function(a,b){return a==b},gt:function(a,b){return a>b},le:function(a,b){return a<=b},ge:function(a,b){return a>=b},ne:function(a,b){return a!=b}},actions:{email:{reg:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,err:"格式不正确"},phone:{reg:/^(1(([35][0-9])|(47)|[8][01236789]))\d{8}$/,err:"格式不正确"},tel:{reg:/^(\+?\d{1,3})?\s*(0\d{2,3}(\-)?)?\d{7,8}$/,err:"格式不正确"},specialChar:{reg:/^[a-zA-Z0-9_\(\)\-\u4e00-\u9fa5《》,，]+$/,err:"格式不正确, 只能为字母、数字、汉字、下划线、《、》等"},htmlChar:{reg:/[^<>]/,err:"含有特殊字符"},password:{reg:/^.{4,18}$/,err:"长度必须为4到18个字符"},housePhone:{reg:/\d{1,6}/,err:"格式不正确, 只能为6位以内的数字"},roomCapacity:{reg:/\d+/,err:"格式不正确, 只能为数字"},bookingDate:{reg:/^((0?\d)|(1\d)|(2[0-3])):([0-5]\d)$/,err:"格式不正确, 时间格式为00:00"},Number:{reg:/^\d+(\.\d+)?$/,err:"格式不正确, 必须为数字"},String:{reg:/[^\<\>]+/,err:"格式不正确, 不能含有特殊字符"}},validate:function(b){var c=a(b).attr(this.className)||"",d=a(b).attr("description")||"",e=arguments[1]||a(b).val()||a(b).html(),f=a(b).get(0).hasAttribute("required")||a(b).get(0).hasAttribute("xrequired"),g=a(b).attr("compare");if(e.trim().length==0)return f?(common.popBy(b,d+"不能为空"),!1):g&&!this.compare(b,g.split("|")[0],g.split("|")[1])?(common.popBy(b,d+"输入不匹配"),!1):!0;if(c.length==0)return!0;var h=this.actions[c];return h==null?(common.popBy(b,"对应的正则表达式不存在"),!1):(h.reg.constructor!==RegExp&&(h.reg=new RegExp(h.reg)),h.reg.test(e)?g&&!this.compare(b,g.split("|")[0],g.split("|")[1])?(common.popBy(b,d+"输入不匹配"),!1):!0:(common.popBy(b,d+h.err),!1))},compare:function(b,c,d){if(a(b).length==0||a(c).length==0)return!1;d=d||"eq";var e=a(b).val()||a(b).html(),f=a(c).val()||a(c).html();return this.compareMode[d](e,f)},bind:function(b){var c=b?a(b).find(".validator"):a(".validator"),d=this;c.blur(function(){d.validate(this)})},delegate:function(b){var c=this;a(b).delegate(".validator","blur",function(){c.validate(this)})},validateAll:function(b){var c=this,d=0,e=b?a(b).find(".validator"):a(".validator");return e.each(function(a,b){c.validate(b)||d++}),d==0}}}($);typeof define=="function"&&define.amd&&define(["lib/common"],function(){return validator})