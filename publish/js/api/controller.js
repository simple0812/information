define(["lib/angular","lib/extension","lib/underscore","lib/pager"],function(){function b(a,b,c){a.models=[],c.retrieve().done(function(b){a.models=b.result,console.log(b.result),$(".userList").show()}),a.$on("$destroy",function(){console.log(a.models.length+"..")}),a.remove=function(b,d){confirm("确认删除项目吗？")&&c.delete([b.model.id]).done(function(){a.models.removeAt(b.$index),a.$apply()}).fail(function(a){common.popBy(d,a)})},a.removeModels=function(b,d){if($(".chkItem:checked").length==0)return common.popBy(d,"请选择要删除的项目");var e=[];$(".chkItem:checked").each(function(a,b){e.push($(b).val())}),confirm("确认删除选中的项目吗？")&&c.delete(e).done(function(){a.models=_.reject(a.models,function(a){return e.indexOf(a.id)!=-1}),a.$apply(),$("#chkAllItems").prop("checked",!1)}).fail(function(a){common.popBy(d,a)})},a.showEditModal=function(a,b){var c=$("#createUserModal").scope();$("#btnSave").data("save-type","edit");for(var d in a.model)c.model[d]=a.model[d];$("#logoImg").attr("src",a.model.logo).show(),$("#createUserModal").modal("show")},a.showCreateModal=function(){$("#btnSave").data("save-type","create"),$("#createUserModal").modal("show")}}var a=angular.module("moduleListCtrl",[]);a.controller("modelsCtrl",["$scope","$window","svc",b])})