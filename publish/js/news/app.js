function $get(){return document.getElementById(arguments[0])}function pagerDelegate(a,b,c){var d=function(){var d=[];d.push(c),b.apply(a,d)};return d}function readonly(){return this.blur(),!1}function getType(a){var b;return((b=typeof a)=="object"?a==null&&"null"||Object.prototype.toString.call(a).slice(8,-1):b).toLowerCase()}function extend(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.superClass=b,b.prototype.constructor==Object.prototype.constructor&&(b.prototype.constructor=b)}define("news/service",["lib/angular"],function(){var a=angular.module("moduleSvc",[]);a.factory("svc",["$http",function(a){return{"delete":function(a){var b=$.Deferred(),c=b.promise();return $.ajax({type:"DELETE",url:"/new",data:JSON.stringify({ids:a.join(",")}),contentType:"application/json; charset=utf-8"}).success(function(a){if(!a)return b.reject("未知的错误");if(!a.state||a.state=="error")return b.reject(a.result);b.resolve()}),c},update:function(b){var c=$.Deferred(),d=c.promise();return a.put("/new",b).success(function(a){if(!a||a.state=="error")return c.reject(a?a.result:"未知的错误");c.resolve(a.result)}),d},create:function(b){var c=$.Deferred(),d=c.promise();return a.post("/new",b).success(function(a){if(!a||a.state=="error")return c.reject(a?a.result:"未知的错误");c.resolve(a.result)}),d},retrieve:function(){var b=$.Deferred(),c=b.promise();return a.get("/news",{params:pager.condition}).success(function(a){if(!a)return b.reject("未知的错误");if(!a.state||a.state=="error")return b.reject(a.result);b.resolve(a)}),c}}}])}),window.console||(window.console={log:function(){}}),Array.prototype.objCount=function(a){return a},String.prototype.format=function(){var a=arguments;return this.replace(/\{(\d+)\}/g,function(b,c){return a[c]})},String.prototype.trimUrlPath=function(){return this.replace(/http:\/\/[^\/]+(:\d{2,8})?\//,"/")},String.format=function(){if(arguments.length==0)return null;var a=arguments[0];for(var b=1;b<arguments.length;b++){var c=new RegExp("\\{"+(b-1)+"\\}","gm");a=a.replace(c,arguments[b])}return a},String.formatArgs=function(){if(arguments.length==0)return null;var a=arguments[0],b=arguments[1];for(var c=0;c<b.length;c++){var d=new RegExp("\\{"+c+"\\}","gm");a=a.replace(d,b[c])}return a},String.prototype.htmlEncode=function(){var a=document.createElement("div");a.textContent!=null?a.textContent=this:a.innerText=this;var b=a.innerHTML;return a=null,b},String.prototype.htmlDecode=function(){var a=document.createElement("div");a.innerHTML=this;var b=a.innerText||a.textContent;return a=null,b},Array.indexOf=function(){var a=arguments[0];for(var b=0;b<a.length;b++)if(a[b]==arguments[1])return b;return-1},Array.prototype.Clone=function(){return JSON.parse(JSON.stringify(this))},Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]==a)return b;return-1},Array.prototype.removeAt=function(a){return this.splice(a,1)},Array.prototype.remove=function(a){var b=(","+this.join(",")+",").replace(","+arguments[0]+",",",");return b!=","?b.substr(1,b.length-2).split(","):[]},Function.prototype.method=function(a,b){if(arguments.length<2)throw new Error("参数长度不正确");if(typeof a!="string")throw new Error("参数类型不正确");if(typeof b!="function")throw new Error("参数类型不正确");this.prototype[a]=b},function(a){var b=a({});a.subscribe=function(){b.on.apply(b,arguments)},a.unSubscribe=function(){b.off.apply(b,arguments)},a.publish=function(){b.trigger.apply(b,arguments)}}($),define("lib/extension",function(){}),define("news/controller",["lib/angular","lib/extension","lib/underscore","lib/pager"],function(){function b(a,b,c){function d(){pager.moveIndicator(arguments[0]),c.retrieve().done(function(b){a.models=b.result,console.log(b),console.log("........"),$(".userList").show(),pager.setRecordCount(b.allCount),pager.renderNumberStyleHtml($get("pager"))}).fail(function(){console.log("---------")})}pager=new Pager(query_list.pagesize,0,1,query_list,d,-1),pager.renderNumberStyleHtml($("#pager").get(0)),d({mode:"nums",val:1}),a.models=[],a.$on("$destroy",function(){console.log(a.models.length+"..")}),a.remove=function(b,d){confirm("确认删除项目吗？")&&c.delete([b.model.id]).done(function(){console.log(b.$index+".............."),a.models.removeAt(b.$index),a.$apply()}).fail(function(a){common.popBy(d,a)})},a.removeModels=function(b,d){if($(".chkItem:checked").length==0)return common.popBy(d,"请选择要删除的项目");var e=[];$(".chkItem:checked").each(function(a,b){e.push($(b).val())}),confirm("确认删除选中的项目吗？")&&c.delete(e).done(function(){a.models=_.reject(a.models,function(a){return e.indexOf(a.id)!=-1}),a.$apply(),$("#chkAllItems").prop("checked",!1)}).fail(function(a){common.popBy(d,a)})},a.showEditModal=function(a,b){var c=$("#createUserModal").scope();$("#btnSave").data("save-type","edit");for(var d in a.model)c.model[d]=a.model[d];$("#logoImg").attr("src",a.model.logo).show(),$("#createUserModal").modal("show")},a.showCreateModal=function(){$("#btnSave").data("save-type","create"),$("#createUserModal").modal("show")},a.search=function(a){console.log($("#searchInput").val()),query_list.keyword=$("#searchInput").val(),d({mode:"nums",val:1})}}var a=angular.module("moduleListCtrl",[]);a.controller("modelsCtrl",["$scope","$window","svc",b])}),require.config({baseUrl:"/js",paths:{moment:"lib/moment"}}),define("news/filter",["moment","lib/angular"],function(){count=0;var a=angular.module("moduleFilter",[]);a.filter("dateFilter",function(){return function(a){return moment(a).utc().format("YYYY-MM-DD HH:mm:ss")}}),a.filter("searchFilter",function(){return function(a,b){return b?_.filter(a,function(a){return a.name.indexOf(b)>-1}):a}})}),define("news/editCtrl",["lib/angular"],function(){function b(a,b,c,d){function e(){a.model={name:"",logo:""}}function f(){d.create(a.model).done(function(b){a.model.id=b.id;var c=$("#user").scope();c.models.push(a.model),$("#createUserModal").modal("hide"),$("#btnSave").data("save-type","")}).fail(function(){$("#createUserModal").modal("hide"),$("#btnSave").data("save-type","")})}function g(){d.update(a.model).done(function(){var b=$("#user").scope(),c=_.find(b.models,function(b){return b.id==a.model.id});for(var d in a.model)c[d]=a.model[d];$("#createUserModal").modal("hide"),$("#btnSave").data("save-type","")}).fail(function(){$("#createUserModal").modal("hide"),$("#btnSave").data("save-type","")})}a.model={name:"",age:""},a.save=function(){if(!validator.validateAll("#createUserModal"))return;var a=$("#btnSave").data("save-type");a=="edit"?g():a=="create"&&f()},$("#createUserModal").on("hidden.bs.modal",function(a){e()})}var a=angular.module("moduleDetailCtrl",[]);a.controller("editCtrl",["$scope","$http","$window","svc",b])}),define("news/directive",["lib/angular"],function(){var a=angular.module("moduleDirect",[])}),require.config({baseUrl:"/js"}),require(["lib/bootstrap","lib/validator","news/service","news/controller","news/filter","news/editCtrl","news/directive"],function(){validator.bind(),angular.module("myApp",["moduleListCtrl","moduleDetailCtrl","moduleSvc","moduleFilter","moduleDirect"]),angular.element(document).ready(function(){angular.bootstrap(document,["myApp"])})}),define("news/app",function(){})